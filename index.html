<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR.js Видеоплеер</title>
    <script src="./library/aframe.min.js"></script>
    <script src="./library/aframe-ar.js"></script>
    <style>
        #instructionsButton {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: #333;
            color: white;
            border: 2px solid white;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            font-family: Arial, sans-serif;
            font-size: 16px;
            z-index: 100;
            transition: background 0.3s;
        }
        #instructionsButton:hover {
            background: #555;
        }
        #instructions {
            display: none;
            position: fixed;
            bottom: 50px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            font-family: Arial, sans-serif;
            z-index: 100;
            max-width: 300px;
        }
    </style>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs>
        <!-- ------------------------Маркер hiro--------------------- -->
        <a-marker type="pattern" url="./marker/pattern-hiro.patt" emitevents="true" id="marker_hiro">
            <!-- Видеоэлемент -->
            <a-video id="video1" src="#test-video" width="16" height="9" position="0 0 0" rotation="-90 0 0" scale="0.25 0.25 0.25" visible="true"></a-video>
        </a-marker>
        <a-entity camera></a-entity>
        <!-- ------------------------Маркер hiro--------------------- -->
        <!-- ------------------------Маркер A------------------------ -->
        <a-marker type="pattern" url="./marker/pattern-letterA.patt" emitevents="true" id="marker_A">
            <!-- Видеоэлемент -->
            <a-video id="video2" src="#A-video" width="16" height="9" position="0 0 0" rotation="-90 0 0" scale="0.25 0.25 0.25" visible="true"></a-video>
        </a-marker>
        <a-entity camera></a-entity>
        <!-- ------------------------Маркер A------------------------ -->
        <!-- ------------------------Маркер B------------------------ -->
        <a-marker type="pattern" url="./marker/pattern-letterB.patt" emitevents="true" id="marker_B">
            <!-- Видеоэлемент -->
            <a-video id="video3" src="#B-video" width="9" height="16" position="0 0 0" rotation="-90 0 0" scale="0.25 0.25 0.25" visible="true"></a-video>
        </a-marker>
        <a-entity camera></a-entity>
        <!-- ------------------------Маркер B------------------------ -->
        <!-- ------------------------Маркер C------------------------ -->
        <a-marker type="pattern" url="./marker/pattern-letterC.patt" emitevents="true" id="marker_C">
            <!-- Видеоэлемент -->
            <a-video id="video4" src="#C-video" width="16" height="9" position="0 0 0" rotation="-90 0 0" scale="0.25 0.25 0.25" visible="true"></a-video>
        </a-marker>
        <a-entity camera></a-entity>
        
        <!-- ------------------------Маркер C------------------------ -->
                <a-marker type="pattern" url="./marker/pattern-cat.patt" emitevents="true" id="marker_C">
            <!-- Видеоэлемент -->
            <a-video id="video4" src="#cat-video" width="16" height="9" position="0 0 0" rotation="-90 0 0" scale="0.25 0.25 0.25" visible="true"></a-video>
        </a-marker>
        <a-entity camera></a-entity>

        <!-- Список видео -->
        <a-assets>
            <video id="test-video" autoplay loop crossorigin="anonymous" playsinline preload="auto">
                <source src="./videos/yar.mp4" type="video/mp4">
            </video>
            <video id="A-video" autoplay loop crossorigin="anonymous" playsinline preload="auto">
                <source src="./videos/yar2.mp4" type="video/mp4">
            </video>
            <video id="B-video" autoplay loop crossorigin="anonymous" playsinline preload="auto">
                <source src="./videos/yar3.mp4" type="video/mp4">
            </video>
            <video id="cat-video" autoplay loop crossorigin="anonymous" playsinline preload="auto">
                <source src="./videos/cat.mp4" type="video/mp4">
            </video>
        </a-assets>
        <!-- Список видео -->
    </a-scene>

    <!-- Кнопка для показа/скрытия инструкций -->
    <button id="instructionsButton">Показать инструкции</button>

    <!-- Инструкции для пользователя -->
    <div id="instructions">
        <h3>Инструкции по использованию Видеоплеера</h3>
        <p>1. Направьте камеру вашего устройства на один из маркеров (hiro, A, B или C).</p>
        <p>2. При обнаружении маркера начнется воспроизведение соответствующего видео.</p>
        <p>3. Если маркер пропадает из поля зрения камеры, видео останавливается и сбрасывается на начало.</p>
        <p>4. Убедитесь, что у вас хорошее освещение и маркер четко виден для корректной работы AR.</p>
    </div>

    <script>
        // Переключение видимости инструкций
        const instructionsButton = document.getElementById('instructionsButton');
        const instructions = document.getElementById('instructions');
        instructionsButton.addEventListener('click', () => {
            const isVisible = instructions.style.display === 'block';
            instructions.style.display = isVisible ? 'none' : 'block';
            instructionsButton.textContent = isVisible ? 'Показать инструкции' : 'Скрыть инструкции';
        });

        // Обнаружение маркера hiro
        const marker_hiro = document.querySelector('#marker_hiro');
        marker_hiro.addEventListener('markerFound', function () {
            const video1 = document.querySelector('#video1');
            const videoElement = video1.components.material.material.map.image;
            videoElement.play();
            videoElement.muted = false;
        });

        marker_hiro.addEventListener('markerLost', function () {
            const video1 = document.querySelector('#video1');
            const videoElement = video1.components.material.material.map.image;
            videoElement.currentTime = 0;
            videoElement.muted = true;
        });

        // Обнаружение маркера A
        const marker_A = document.querySelector('#marker_A');
        marker_A.addEventListener('markerFound', function () {
            const video2 = document.querySelector('#video2');
            const videoElement = video2.components.material.material.map.image;
            videoElement.play();
            videoElement.muted = false;
        });

        marker_A.addEventListener('markerLost', function () {
            const video2 = document.querySelector('#video2');
            const videoElement = video2.components.material.material.map.image;
            videoElement.currentTime = 0;
            videoElement.muted = true;
        });

        // Обнаружение маркера B
        const marker_B = document.querySelector('#marker_B');
        marker_B.addEventListener('markerFound', function () {
            const video3 = document.querySelector('#video3');
            const videoElement = video3.components.material.material.map.image;
            videoElement.play();
            videoElement.muted = false;
        });

        marker_B.addEventListener('markerLost', function () {
            const video3 = document.querySelector('#video3');
            const videoElement = video3.components.material.material.map.image;
            videoElement.currentTime = 0;
            videoElement.muted = true;
        });

        // Обнаружение маркера C
        const marker_C = document.querySelector('#marker_C');
        marker_C.addEventListener('markerFound', function () {
            const video4 = document.querySelector('#video4');
            const videoElement = video4.components.material.material.map.image;
            videoElement.play();
            videoElement.muted = false;
        });

        marker_C.addEventListener('markerLost', function () {
            const video4 = document.querySelector('#video4');
            const videoElement = video4.components.material.material.map.image;
            videoElement.currentTime = 0;
            videoElement.muted = true;
        });
    </script>
</body>
</html>
